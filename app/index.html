<!DOCTYPE html>
<html lang="cn">

<head>
    <meta charset="UTF-8">
    <title>MysqlComparer--Mysql数据库比对工具--V20160426</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="../node_modules/flat-ui/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="../node_modules/flat-ui/css/flat-ui.css" rel="stylesheet">
    <link href="./src/css/index.css" rel="stylesheet">
    <link rel="shortcut icon" href="images/favicon.ico">
</head>

<body>
    <div class="container-fluid">
        <!-- <div class="row">
            <div class="col-md-3">
                <div class="form-group">
                    <input type="text" value="" id="edt_ip" placeholder="IP地址" class="form-control" />
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group">
                    <input type="number" value="" name="port" id="edt_ip" min="1" max="999999" placeholder="端口" class="form-control" />
                </div>
            </div>
        </div> -->
        <!-- /row -->

        <div class="oper_button row">
            <!-- <div class="form-group">
                <a href="but_test_start" class="btn btn-block btn-lg btn-primary">测试开始</a>
                <a href="but_test_end" class="btn btn-block btn-lg btn-primary">测试结束</a>
            </div> -->

            <div class="button pull-left"><button id="but_test_start" type="button" class="btn btn-primary active">开始记录</button></div>
            <div class="button pull-left"><button id="but_test_end" type="button" class="btn btn-primary" disabled="disabled">结束记录</button></div>
            <div class="button pull-left"><button id="but_show" type="button" class="btn btn-primary" disabled="disabled">显示结果</button></div>

            <div class="button_help pull-right"><button id="but_help" type="button" class="btn btn-info">隐藏帮助</button></div>
        </div>

        <div id="help_info">
            <div>
                <h3>用户手册</h3>
            </div>
            <div>
                <h4>功能说明</h4>
                <p>
                    MySql数据库的数据对比工具。<br/> 比较同一个表两个时间点的数据，并在界面上展示比较结果。
                    <br/> 需要比较的数据库和表，可以通过配置文件配置。
                </p>
            </div>
            <div>
                <h4>操作说明</h4>
                <p>
                    单击"开始记录"按钮，将数据库中的数据加载到本地，做为初始镜像数据；
                </p>
                <p>
                    单击"结束记录"按钮，将数据库中的数据加载到本地，做为终止镜像数据；
                </p>
                <p>
                    单击"显示结果"按钮，会比较初始镜像数据和终止镜像数据，并将展示比较结果；
                </p>
                <p>
                    "开始记录"和"结束记录"按钮可以单击多次，"结束记录"按钮将和最近的一次"开始记录"记录的数据比较；
                </p>
            </div>
            <div>
                <h4>软件配置</h4>
                <p>
                    通过config.json文件可以配置监控的数据库和表； 可以参考config_aliyun.json和config_local.json文件。
                </p>
            </div>
            <div>
                <h4>问题反馈</h4>
                <p>
                    若有问题，请联系 ganlong@hundsun.com / lontoken@gmail.com。
                </p>
            </div>
        </div>

        <div id="diff_res">
            <!-- <div class="diff_table">
                <div class="diff_table_info row">
                    <div class="col-md-3"><label>表名：</label><span>table_name</span></div>
                    <div class="col-md-9"><label>主键名：</label><span>key_name</span></div>
                </div>
                <div class="diff_info row">
                    <div>
                        <div class="diff_header">
                            <div class="col-md-1"><label>1</label></div>
                            <div class="col-md-2"><label>类型：</label><span>add</span></div>
                            <div class="col-md-9"><label>主键值：</label><span>23</span></div>
                        </div>
                        <div class="diff_info col-md-12">
                            <table border="1" class="table table-striped table-bordered table-hover table-condensed">
                                <tr>
                                    <th>字段名</th><th>business_date</th>
                                </tr>
                                <tr>
                                    <th>原值</th><td>4</td>
                                </tr>
                                <tr>
                                    <th>新值</th><td>5</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div>
                        <div class="diff_header">
                            <div class="col-md-1"><label>1</label></div>
                            <div class="col-md-2"><label>类型：</label><span>add</span></div>
                            <div class="col-md-2"><label>主键值：</label><span>23</span></div>
                        </div>
                        <div class="diff_info col-md-12">
                            <table border="1" class="table table-striped table-bordered table-hover table-condensed">
                                <tr>
                                    <th>字段名</th><th>business_date</th>
                                </tr>
                                <tr>
                                    <th>原值</th><td>4</td>
                                </tr>
                                <tr>
                                    <th>新值</th><td>5</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>


            <div class="diff_table">
                <div class="diff_table_info row">
                    <div class="col-md-3"><label>表名：</label><span>table_name</span></div>
                    <div class="col-md-9"><label>主键名：</label><span>key_name</span></div>
                </div>
                <div class="diff_diff_info row">
                    <div>
                        <div class="diff_header">
                            <div class="col-md-1"><label>1</label></div>
                            <div class="col-md-2"><label>类型：</label><span>add</span></div>
                            <div class="col-md-9"><label>主键值：</label><span>23</span></div>
                        </div>
                        <div class="diff_info col-md-12">
                            <table border="1" class="table table-striped table-bordered table-hover table-condensed">
                                <tr>
                                    <th>字段名</th><th>business_date</th>
                                </tr>
                                <tr>
                                    <th>原值</th><td>4</td>
                                </tr>
                                <tr>
                                    <th>新值</th><td>5</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div>
                        <div class="diff_header">
                            <div class="col-md-1"><label>1</label></div>
                            <div class="col-md-2"><label>类型：</label><span>add</span></div>
                            <div class="col-md-2"><label>主键值：</label><span>23</span></div>
                        </div>
                        <div class="diff_info col-md-12">
                            <table border="1" class="table table-striped table-bordered table-hover table-condensed">
                                <tr>
                                    <th>字段名</th><th>business_date</th>
                                </tr>
                                <tr>
                                    <th>原值</th><td>4</td>
                                </tr>
                                <tr>
                                    <th>新值</th><td>5</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div> -->
        </div>

        <script src="../node_modules/flat-ui/js/jquery-1.8.3.min.js"></script>

        <script>
            var Dbopr = require('./src/script/Dbopr');
            var dbopr=new Dbopr();
            
            $(function () {
                dbopr.initDatabaseConn();

                $('#but_test_start').bind("click", function () {
                    console.log("[but_test_start]click");
                    $("#but_test_end").removeAttr("disabled").addClass("active");
                    $("#help_info").hide();
                    $('#but_help').text("显示帮助");
                    dbopr.Query('create table test(Id int,Test nvarchar(50))',function (err, data) {
                        if (err) {
                            console.log('info', 'initDatabaseConn faile.err=' + err);
                        } else {
                            hasInit = true;
                            console.log('info', 'initDatabaseConn success.data=' + data);
                        }
                    }); 
                });
            });
        </script>
    </div>
</body>

</html>